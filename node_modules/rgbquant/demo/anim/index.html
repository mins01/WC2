<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>RgbQuant.js - realtime quantization</title>

	<style>
		html, body {
			padding: 0;
			margin: 0;
		}

		canvas, img {
			display: block;
			margin: 10px 0;
			background-image: url(bgnd.png);

			image-rendering: optimizeSpeed;
			image-rendering: -moz-crisp-edges;
			image-rendering: -webkit-optimize-contrast;
			image-rendering: optimize-contrast;
			-ms-interpolation-mode: nearest-neighbor;
		}
	</style>

	<script src="../../src/rgbquant.js"></script>
	<script>
		function drawPixels(idxi8, width0, width1) {
			var idxi32 = new Uint32Array(idxi8.buffer);

			width1 = width1 || width0;

			var can = document.createElement("canvas"),
				can2 = document.createElement("canvas"),
				ctx = can.getContext("2d"),
				ctx2 = can2.getContext("2d");

			can.width = width0;
			can.height = Math.ceil(idxi32.length / width0);
			can2.width = width1;
			can2.height = Math.ceil(can.height * width1 / width0);

			ctx2.imageSmoothingEnabled = ctx2.mozImageSmoothingEnabled = ctx2.webkitImageSmoothingEnabled = false;

			var imgd  = ctx.createImageData(can.width, can.height),
				buf32 = new Uint32Array(imgd.data.buffer);

			buf32.set(idxi32);

			ctx.putImageData(imgd, 0, 0);

			ctx2.drawImage(can, 0, 0, can2.width, can2.height);

			return can2;
		}
	</script>

	<script>
		var stage = document.createElement("canvas"),
			stageCtx = stage.getContext("2d");

		var pal8, palCan, imgd;

		var first = true,
			quant = new RgbQuant(),
			encode = function(can0) {
			//	return;

				if (first) {
					quant.sample(can0);

					stage.width = can0.width;
					stage.height = can0.height;
					document.body.appendChild(stage);
					imgd = stageCtx.createImageData(stage.width, stage.height);

					pal8 = quant.palette();
					palCan = drawPixels(pal8, 16, 128);
					document.body.appendChild(palCan);

					first = false;
				}

				imgd.data.set(quant.reduce(can0));
				stageCtx.putImageData(imgd, 0, 0);
			};
	</script>
</head>
<body>
	<canvas id="c"></canvas>
	<script>
		var b = document.body;
		var c = document.getElementsByTagName('canvas')[0];
		var a = c.getContext('2d');
		document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218
	</script>

	<!--http://marijnhaverbeke.nl/js1k/-->
	<!--http://js1k.com/2010-first/demo/635-->
	<script>c=document.body.children[0];h=t=150;L=w=c.width=800;u=D=50;H=[];R=Math.random;for($ in C=c.getContext('2d'))C[$[J=X=Y=0]+($[6]||'')]=C[$];setInterval("if(D)for(x=405,i=y=I=0;i<1e4;)L=H[i++]=i<9|L<w&R()<.3?w:R()*u+80|0;$=++t%99-u;$=$*$/8+20;y+=Y;x+=y-H[(x+X)/u|0]>9?0:X;j=H[o=x/u|0];Y=y<j|Y<0?Y+1:(y=j,J?-10:0);with(C){A=function(c,x,y,r){r&&arc(x,y,r,0,7,0);fillStyle=c.P?c:'#'+'ceff99ff78f86eeaaffffd45333'.substr(c*3,3);fill();beginPath()};for(D=Z=0;Z<21;Z++){Z<7&&A(Z%6,w/2,235,Z?250-15*Z:w);i=o-5+Z;S=x-i*u;B=S>9&S<41;ta(u-S,0);G=cL(0,T=H[i],0,T+9);T%6||(A(2,25,T-7,5),y^j||B&&(H[i]-=.1,I++));G.P=G.addColorStop;G.P(0,i%7?'#7e3':(i^o||y^T||(y=H[i]+=$/99),'#c7a'\));G.P(1,'#ca6');i%4&&A(6,t/2%200,9,i%2?27:33);m(-6,h);qt(-6,T,3,T);l(47,T);qt(56,T,56,h);A(G);i%3?0:T<w?(A(G,33,T-15,10),fc(31,T-7,4,9)):(A(7,25,$,9),A(G,25,$,5),fc(24,$,2,h),D=B&y>$-9?1:D);ta(S-u,0)}A(6,u,y-9,11);A(5,M=u+X*.7,Q=y-9+Y/5,8);A(8,M,Q,5);fx(I+'c',5,15)}D=y>h?1:D" + ";encode(c)",50);onkeydown=onkeyup=function(e){E=e.type[5]?4:0;e=e.keyCode;J=e^38?J:E;X=e^37?e^39?X:E:-E}</script>

	<!--http://js1k.com/2012-love/demo/1175-->
	<!--<script>Y=H=9;D=0;P='000fb6853345789593fffff6933ccc444555222f00'.match(/.../g);T=parseInt;S=function(z,x,y,w,s){for(i=0,f='';i<z.length;i++)f+=new Array((o=P[z[i].charCodeAt(0)-97]||'',n=T(z[i+1]),(n?(i++,n):1)+1)).join('"'+o+'",');for(z=eval('['+f+']'),i=0,r=0,l=0;i<z.length;(r=(++r)>=w?0:r),i++,l=T(i/w))if((v=z[i]))a.fillStyle='#'+v,a.fillRect(x+(r*s),y+(l*s),s,s)};setInterval(function(){;S('xf2xf2xf9afaf9fdfdfdf2d5xfdi3df9f9xf3',((Y+4)%9==0?70:40)+(D*1),20+(D*10),7+D,Math.max(0,27-D),S('k7l2k8l2k9l2k9l2k9l2k2',0,0,18,34,S('m',0,0,1,c.width=600)));S('l9',25,305,9,24,Y++);H>0?S('n'+H,25,305,9,24):(Y=-1,D++);p=Y%9+7==7?40:0;p?S('x2cxcgcxgbigcxgxcgx2c',300,45,3,15,H--):T;S('x3f2x3f3g3f6x2b4hx2b3h2cxi2gic2xi2gcicxi2cbicxe5x2e2xe2xc3xc2',370-p,40,7,10);p=(Y+5)%9==0?40:0;p?S('jjjbd',335,181,5,15,H--):T;S('xc5x2b3c2x2b4cx2b3c2x2d5x2d3e3xd3e3xcbce3xd4ex2c2xc2xc3xc2',440-p,140,7,10);p=(Y+2)%9==0?40:0;p?S('ni3x4bdx9d',360,270,10,12,H--):T;S('j4x3b3j2x2b4jx2j2bj2x2j2e3x2je4x2e2d2e2xe2be3xe6xd7',520-p,230,7,10);encode(c);},c.height=350)</script>-->

	<!--http://alteredqualia.com/demos/1k/boom/-->
	<!--http://js1k.com/2010-first/demo/764-->
	<!--<script>D=document;K=D.body.children.c;C=K.getContext("2d");X=[];A=4;M=2;Z=0;H=50;Q=S=N=K.width=K.height=300;W=S-50;Y=S-20;F=S/5;P=L=S/2;G=Math.random;R=function(a,b,c,d,e){C.fillStyle=a;C.fillRect(b,c,d,e)};D.onmousemove=function(a){L=a.pageX;L=L<W?L:W};setInterval(function(){Q=N++%F?Q:0.5>G()?1+M*G():-1-M*G();Q=P<W&&0<P?Q:-Q;P+=Q;N%H?0:X.push([P+8,F,1+G()]);M=N%500?M:M+0.5;H=N%100||16>H?H:H-=1;R("#6af",0,0,S,S);R("#444",0,F,S,S);for(i=12;--i;){R(i%2?"#fff":"#000",P,F-3*i,20,3);R("#333",0,F+44*(i-0.6),S,2);for(j=8;j--;)R("#333",(20*i+60*j)%S,F+44*(i-0.6),2,44)}R("#222",0,F,S,20);R("#0b0",0,S-30,S,30);R("#fff",P-6,F-30,5,38);R("#fff",P+21,F-30,5,38);R("#900",P+3,F-46,15,10);C.font="30pt arial";C.fillStyle="#FA9";C.fillText("\u263b",P-10,F-36);R("#000",P-2,F-51,26,6);C.fillStyle="#fff";C.fillText("..",P,F-46);for(i=A;--i;)R("#FA0",L,Y-15*i,50,5);for(i=X.length;i--;)X[i][1]+=X[i][2],C.fillStyle="#111",C.beginPath(),C.arc(X[i][0]+4,X[i][1]+3,10,0,6,0),C.fill(),R("#fff",X[i][0]+4,-18+X[i][1],2,10),C.fillStyle="#a00",C.fillText(".",X[i][0]-3,X[i][1]+1),C.fillStyle="#ff0",C.fillText("*",X[i][0]-3,X[i][1]+1),X[i][1]>Y-15*A&&(X[i][0]>L&&X[i][0]<L+50)&&(X.splice(i,1),Z++),X[i][1]>Y&&(X.splice(i,1),A--);C.fillStyle="#fff";C.fillText(Z,5,38);2>A&&(X=[],A=4,M=2,Z=0,H=50);encode(K)},16);</script>-->

	<!--http://js1k.com/2010-first/demo/778-->
	<!--<script>n=document;context=n.body.children[0].getContext("2d");M=Math;keys=[car=0,pos=0,time=0,speed=0];m=255;u=2*(h=100);track=function(a){a-=pos;return 30*(M.cos(a/96+M.sin(a/139))+8*M.sin(a/512))+45*M.sin(a/80)};rect=function(a,k,l,f,j,p,q){context.fillStyle="rgb("+[f,j||f,p||j||f]+")";context.fillRect(a,k,l,q||1)};n.onkeydown=n.onkeyup=function(a){(b=a.keyCode-37)>>2||(keys[b]=a.type[5]?0.5:0)};I=setInterval(function(a){speed=M.min(-M.min(0,keys[3]-keys[1]+0.25+(M.abs(car)>(a=56))-speed),8);b=40*(pos+=speed|0)/3>>13;car=M.min(-M.min(4*((offset=track(85))-(x=keys[2]-keys[0])-track(85-speed)-(offset-track(35))*speed/50)-car,h),h);for(i=60;i--;)rect(0,i,300,u+b,u+2*b-i-35,u-i-b),40<i||rect(m+(track(4*i-75)-offset)/10,i+3,4,m),rect(140-(c=60*M.sin(M.acos(1-i/40)))-offset/20,i-b+60,2*c,m,u+b);for(i=9;h-1>i++;)rect(0,d=i+50,300,c=h+b-i,h+b,a-i|1),rect((e=150+track(i)-offset)-i,d,2*i,(i-pos)%8192?c:u+b),0<M.sin(h+(i/h-2)*i+pos%10)||rect(e-i/32,d,i/16,u+b);for(i=-3;29>i++;)27<i&&rect(car+(i-26)*a,120,8,2*keys[3]*m,1,0,2),rect(c=112+(g=(g=20-i)*g/12)*(0.5+x/3)+car,i+h,64-g,i-1>>3&&29>i?u+b:a,1>i?120:(i-9>>3?-5:5)*i+a),19<i||rect(g/2-(offset+u)/10,i+h>>1,h-2*g,150-b-i),18<i||rect(275,39-2*i,20,i+3>2.8*speed?1:m);context.fillText(M.min(3,1+(b=pos-a>>13))+"/3    "+(time++/20|0),m-7,a);encode(n.body.children[0]);3>b||clearInterval(I)},50);</script>-->

	<!--http://js1k.com/2010-first/demo/763-->
	<!--<script>var M=Math,sin=M.sin,cos=M.cos,d=document,canvas=d.getElementById("c"),ctx=canvas.getContext("2d");d.body.style.margin=0;d.body.style.overflow="hidden";var width=canvas.width=300,height=canvas.height=300,left=-width/2,ttop=-height/2;ctx.translate(-left,-ttop);var scale=height/4,text=["1111   111","   1  1","   1   11","   1     1","1  1     1"," 11   111",0,"  1   1  1"," 11   1 1","  1   11","  1   11","  1   1 1"," 111  1  1"],textscroll=-7,textoffset=3,rings=32,ringsize=30,zmax=3,zstep=2*zmax/rings,tstep=2*M.PI/ringsize,zshift=zstep;function rgb(g,c,h){return"rgb("+~~g+","+~~c+","+~~h+")"}setInterval(function(){ctx.fillStyle="black";ctx.fillRect(left,ttop,width,height);var g=+new Date;zshift-=zstep/3;0>zshift&&(zshift+=zstep,textscroll++);for(var c=0,h=rings-1;h--;){var j=h*zstep+zshift,m=200-200/(zmax+zshift)*j,k=m/2;ctx.strokeStyle=rgb(k,k,k);for(var n=70*sin(j+g/1700),p=70*cos(j+g/1100),b=[],a=0;a<4*ringsize;a+=4){var l=a/4,f=l*tstep+M.PI+sin(g/3700),e=scale/j;b[a]=n+cos(f)*e;b[a+1]=p+sin(f)*e;b[a+2]=n+cos(f+tstep)*e;b[a+3]=p+sin(f+tstep)*e;f=(textscroll+h)%40;e=m/4;ctx.fillStyle=rgb(+(text[f]?text[f][l-textoffset]:0)?M.max(150+~~(105*sin(g/100)),e):k/4,0==l%16&&(h+textscroll)%12?255:e,e);c&&(ctx.beginPath(),ctx.moveTo(b[a],b[a+1]),ctx.lineTo(b[a+2],b[a+3]),ctx.lineTo(c[a+2],c[a+3]),ctx.lineTo(c[a],c[a+1]),ctx.fill(),ctx.stroke())}c=b}encode(canvas)},50);</script>-->

	<!--http://js1k.com/2010-first/demo/759-->
	<!--<script>with(document.body.children.c){width=height=330;C=getContext("2d")}D=C.getImageData(9,9,320,200);V=D.data;m=Math;mc=m.cos;ms=m.sin;j=0;o=.7;p=-.4;q=.8;w=.01;window.setInterval("for(i=0;i<63999;i++){a=(j+i/200)/180;d=i*4;c=mc(a);s=ms(a);V[d]=c*128+127;V[d+1]=s*128+127;V[d+2]=c*s*128+127;V[d+3]=255}k=j/99;for(u=0;u<57;u++){h=u/9;for(v=0;v<57;v++){g=v/9;t=60+20*mc(g);x=t*mc(h+k);y=t*ms(h+k)*mc(k/2);z=20*ms(g)*ms(k/2);x2=160+m.floor(o*(x-y));y2=100+m.floor(p*(x+y)+q*z);d=(y2*320+x2)*4;V[d]=V[d+1]=V[d+2]=V[d+3]=255}}C.putImageData(D,9,9);j+=2;q+=w;if(q>1.6||q<.8)w=-w;encode(document.body.children.c);",30)</script>-->

	<!--http://js1k.com/2010-first/demo/15-->
	<!--<script>with(document.body.style){margin="0px";overflow="hidden";}var w=400;var h=400;var ca=document.getElementById("c");ca.width=w;ca.height=h;var c=ca.getContext("2d");m=Math;fs=m.sin;fc=m.cos;fm=m.max;setInterval(d,30);function p(x,y,z){return{x:x,y:y,z:z};}function s(a,z){r=w/10;R=w/3;b=-20*fc(a*5+t);return p(w/2+(R*fc(a)+r*fs(z+2*t))/z+fc(a)*b,h/2+(R*fs(a))/z+fs(a)*b);}function q(a,da,z,dz){var v=[s(a,z),s(a+da,z),s(a+da,z+dz),s(a,z+dz)];c.beginPath();c.moveTo(v[0].x,v[0].y);for(i in v)c.lineTo(v[i].x,v[i].y);c.fill();}var Z=-0.20;var t=0;function d(){t+=1/30.0;c.fillStyle="#000";c.fillRect(0,0,w,h);c.fillStyle="#f00";var n=30;var a=0;var da=2*Math.PI/n;var dz=0.25;for(var z=Z+8;z>Z;z-=dz){for(var i=0;i<n;i++){fog=1/(fm((z+0.7)-3,1));if(z<=2){fog=fm(0,z/2*z/2);}var k=(205*(fog*Math.abs(fs(i/n*2*3.14+t))))>>0;k*=(0.55+0.45*fc((i/n+0.25)*Math.PI*5));k=k>>0;c.fillStyle="rgb("+k+","+k+","+k+")";q(a,da,z,dz);if(i%3==0){c.fillStyle="#000";q(a,da/10,z,dz);}a+=da;}}Z-=0.05;if(Z<=dz)Z+=dz;encode(ca);}</script>-->

	<!--http://js1k.com/2010-first/demo/585-->
	<!--<script>M=Math;_=M.floor;$=M.random;P=M.PI;var d,j,k,T=1E3,Y=600,U=250;this.addEventListener("load",function(){var f=document.body.children[0];a=f.getContext("2d");f.width=T;f.height=Y;d=a.createLinearGradient(0,0,0,Y);x=["0000","2f7f","2850","1f3f"];for(i=0;i<4;)d.addColorStop(i*.33,"#00"+x[i++]);j=[];for(i=U;i--;){f=$()*T/2,l=Y-f/2;l=[$()*T,Y,l];j.push([f,$()*.3,$()*($()<.5?.7:-.7),l,"rgb(0,"+_($()*40)+",0)"])}k=[];for(i=3E3;i--;)k.push(_($()*T));setInterval(function(){F="fillStyle";a[F]=d;K="fillRect";a[K](0,0,T,Y);var b=(new Date).getTime();a[F]="gray";for(i=80;i<3E3;){k[i]+=.1*(i%3+1);k[i]%=T;a[K](k[i++],k[i++],1.5,1.5)}s=M.sin;c=M.cos;Q=b*3E-4;z=s(Q);x=c(Q);i=0;for(a[F]="yellow";i<80;){b=P*2*z+i*P/50;var e=50*x;a[K](U+.5*k[i++]+150*x+e*c(b),U+.5*k[i++]+20*z+e*s(b),3,3)}i=U;for(B="beginPath";--i;){h=j[i];e=h[2]+P/2+z*h[1]*x;g=h[3];b=g[0]+3+h[0]*c(e);e=g[1]-h[0]*s(e);a[B]();a.moveTo(g[0],g[1]);R="bezierCurveTo";a[R](g[0],g[1],g[0]-2,g[2],b,e);a[R](b,e,g[0]-2,g[2],g[0]+6,g[1]);a[F]=h[4];a.fill()};encode(document.body.children[0])},30)}(),false);</script>-->

	<!--http://js1k.com/2010-first/demo/564-->
	<!--<script>n=X=Y=8;a=.994;g=.97;N=[991,149,192,921,199,919];d=document;c=d.body.children[0];c.onclick=function(e){l.push({x:X,y:Y,u:0,v:0,r:15});n++};c.onmousemove=function(e){S=e.clientX;T=e.clientY;U=S-X;V=T-Y;X=S;Y=T;for(i=0;i<n;){with(l[i++]){S=x-X;T=y-Y;D=S*S+T*T;if(D<r*r){u+=U/4;v+=V/4}}}};d=d.documentElement;w=c.width=400;h=c.height=200;L=c.getContext("2d");l=[];for(i=0;i++<n;)l.push({x:w/2+i,y:150,u:i*2-9,v:-i,r:15});setInterval(function(){L.fillStyle="#ddd";L.fillRect(0,0,w+50,h+50);for(i=0;i<n;i++){with(l[i]){L.fillStyle="#"+N[i%6];L.beginPath();L.arc(x,y,r,0,6.2,0);L.fill();k=w-r;x+=u;u*=a;x>k||x<r?u=-u:0;x<r?x=r:(x>k?x=k:0);k=h-r;y+=v;v*=a;y>k||y<0?v=-v:0;y>k?y=k:0;v+=.15;for(j=i+1;j<n;j++){o=l[j];s=x-o.x;t=y-o.y;I=s*s+t*t;f=Math.sqrt(I);m=o.r+r;if(f<m){p=m-f;q=p/2;J=q*s/m;K=q*t/m;x+=J;y+=K;o.x-=J;o.y-=K;z=(s*(u-s)+t*(v-t))/I+1;A=s*z;B=t*z;C=A-u;D=B-v;z=(-s*(o.u+s)-t*(o.v+t))/I+1;E=-s*z;F=-t*z;G=E-o.u;H=F-o.v;u=(E-C)*g;v=(F-D)*g;o.u=(A-G)*g;o.v=(B-H)*g}}}};encode(c)},16)</script>-->

	<!--http://js1k.com/2013-spring/demo/1526-->
	<!--<script>var v=c.height=c.width=256,d=a.getImageData(0,0,v,v),p=new Uint32Array(d.data.buffer),k=[],s=v,t=288,u=0.1,m="333333333333300022222222222221036666666666666547622222262222110762222222222110076222222622211007511555551511040440040004444044447333333400333337622622250322226662262221032222266226222503222266622622250322222666666665445566661111111000001111",e=Math,f=e.sin,g=e.cos,h=e.tan,n=e.PI/180,o=4278190080,q=64,w=16;onkeydown=function(z){k[z.keyCode]=1};onkeyup=function(z){k[z.keyCode]=0};setInterval(function(){var z,b,j,l,A,r,y,x,B,C;u+=k[37]?358<=u?-358:2:k[39]?0>=u?358:-2:0;s+=k[38]?g(u*n):0;t+=k[38]?-f(u*n):0;for(z=v;z--;){l=u+e.atan((128-z)/221)/n;l+=0>l?360:360<=l?-360:0;0<l&&180>l?(j=t&65472,b=s-1/h(l*n)*(j-t),A=1/h(l*n)*q,r=-q,x=(j>>6)-1):(j=(t&65472)+q,b=s-1/h(l*n)*(j-t),A=1/h(l*n)*-q,r=q,x=j>>6);for(y=b>>6;0<y&&y<w&&~m[x*w+y]&4;)b+=A,j+=r,y=b>>6,x+=r>>6;B=(b-s)*g(u*n)-(j-t)*f(u*n);C=0<r?63-b:b;90>l||270<l?(b=(s&65472)+q,j=t-(b-s)*h(l*n),A=q,r=-q*h(l*n),y=b>>6):(b=s&65472,j=t-(b-s)*h(l*n),A=-q,r=q*h(l*n),y=(b>>6)-1);for(x=j>>6;0<x&&x<w&&~m[x*w+y]&4;)b+=A,j+=r,y+=A>>6,x=j>>6;b=(b-s)*g(u*n)-(j-t)*f(u*n);j=b<B?0<A?j:63-j:C;y=14144/(b<B?b:B);x=128-(y>>1);for(r=v-x;r--;)r<x?(p[r*v+z]=o,p[(255-r)*v+z]=6316128|o):p[r*v+z]=(m[(32/y*(r-x)&15)*w+(j/2&15)]&3)*(4210752^(b<B||q))|o}a.putImageData(d,0,0);encode(c)},w);</script>-->

	<!--http://js1k.com/2013-spring/demo/1350-->
	<!--<script>b.style.margin=0;b.style.overflow="hidden";var win=window,width=300,height=300,PI=Math.PI,spin=0;c.width=width;c.height=height;var hthird=height/3,wthird=width/3,sg=a.createLinearGradient(0,0,0,2*hthird);sg.addColorStop(0,"#007eff");sg.addColorStop(1,"#00d2ff");a.fillStyle=sg;a.fillRect(0,0,width,height);var g=a.createRadialGradient(wthird/2,hthird/2,0,wthird/2,hthird/2,wthird/5);g.addColorStop(0,"#fcff00");g.addColorStop(0.8,"#ffde00");g.addColorStop(0.81,"rgba(255,222,0,0.5)");g.addColorStop(1,"rgba(255,222,0,0)");a.fillStyle=g;a.beginPath();a.arc(wthird/2,hthird/2,wthird/5,0,2*PI);a.fill();a.save();g=a.createLinearGradient(0,2*hthird,0,height);g.addColorStop(0,"#00a31a");g.addColorStop(1,"#00d824");a.fillStyle=g;a.beginPath();a.arc(0,4.5*hthird,3*hthird,0,PI,1);a.arc(2*wthird,5.5*hthird,4*hthird,0,PI,1);a.fill();a.clip();for(var n=0,y=1.55*hthird,size=1,alpha=0.01,density,maxdensity=width/32;n<hthird/5.5;n++){density=maxdensity-n/15;a.globalAlpha=alpha;for(var i=-1,dd=width/density;i<density;i++)a.fillStyle=i%2?"#f40000":"#ffec4f",a.font=size+"pt serif",a.fillText(i%2?"\u273f":"\u2740",Math.random()*dd+dd*i-size/2,Math.random()*size+y-size);size++;y+=n;alpha+=0.05}a.restore();var scale=-hthird/2;setInterval(function(){a.fillStyle=sg;a.fillRect(2.75*wthird,1.45*hthird,2*-hthird,1.5*-hthird);a.save();a.translate(2.3*wthird,1.7*hthird);a.beginPath();a.lineTo(0,0);a.lineTo(0,scale);a.lineTo(scale/2,2.2*scale);a.lineTo(scale,scale);a.lineTo(scale,0);a.fillStyle="#8c000a";a.fill();a.fillStyle="#e9c700";a.fillRect(scale/4,0,0.5*scale,scale/2);a.fillRect(scale/3,0.75*scale,0.33*scale,scale/4);a.translate(scale/2,1.75*scale);a.rotate(spin+=0.01);for(i=0;4>i;i++)a.beginPath(),a.lineTo(1.3*scale,0.25*scale),a.lineTo(1.3*scale,0.25*-scale),a.lineTo(0,0),a.fillStyle="#f5efcb",a.fill(),a.fillStyle="#cbd599",a.fillRect(0,0.01*-scale,1.3*scale,0.02*scale),a.rotate(PI/2);a.restore();encode(c)},12);</script>-->
</body>
</html>