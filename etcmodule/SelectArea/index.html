<!doctype html>
<!--
/**
 * SelectArea
 * @description : HTML 에서 영역을 선택하는 툴
 * @제한 : MIT 라이센스 + "공대여자는 예쁘다"를 나태낼 수 있어야만 사용할 수 있습니다.
 * @author : 공대여자
 * @site : www.mins01.com
 * @date :2018-11-12~
 */
-->
<html lang="ko" >
<head>
	<title>SelectArea</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<!-- jquery 관련 -->
	<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" crossorigin="anonymous"></script>   -->


	<!-- 부트스트랩 4 : IE8지원안됨! -->
	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous">  -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" crossorigin="anonymous"></script>  -->
	<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script> -->
	<!-- vue.js -->
	<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->

	<!-- meta og -->

	<meta property="og:title" content="SelectArea">
	<meta property="og:description" content="SelectArea">
	<meta name="og:image" content="http://www.mins01.com/img/logo.gif">
	<meta property="og:image:width" content="190">
	<meta property="og:image:height" content="70" />
	<meta property="og:site_name" content="SelectArea" />
	<meta property="og:type" content="document">

	<!-- //meta og -->

	<link rel="stylesheet" href="SelectArea.css" >
	<script src="SelectArea.js"></script>
	<script>
	var sa0,sa1,sa2,sa3,sa4,sa5,sa6;
	window.addEventListener('load',function(){
		sa0 = SelectArea(document.querySelector("#test-box0"));
		sa0.setRangeTarget(document.querySelector("#test-box-0"))
		sa0.addEventListener('redraw',function(evt){
			console.log("sa0",evt.type);
		});
		sa0.addEventListener('change',function(evt){ // 커스텀 이벤트
			// console.log("sa0",evt.type,JSON.stringify(this.selectedArea.getBoundingClientRect()));

			document.querySelector('#test-out0').value=JSON.stringify(this.getSelectedAreaRect())
			document.querySelector('#test-out1').value=JSON.stringify(this.selectedArea.getBoundingClientRect())
			var r = this.getSelectedAreaRect()
			var f = document.form_sa0;
			f.v2_x.value = f.v_x.value = r.x;
			f.v2_y.value = f.v_y.value = r.y;
			f.v2_w.value = f.v_w.value = r.width;
			f.v2_h.value = f.v_h.value = r.height;
		})
		sa0.addEventListener('click',function(evt){
			console.log("sa0",evt.type);
		})
		sa0.box.layout.addEventListener('click',function(evt){
			console.log("sa0.box.layout",evt.type);
		})
		sa0.box.layout.addEventListener('dblclick',function(evt){
			console.log("sa0.box.layout",evt.type);
		})
		sa0.bg.addEventListener('click',function(evt){
			console.log("sa0.bg",evt.type);
		})
		// sa0.show(10,10,100,50);
		sa0.showWithSize(10,10,100,50);
		sa0.dispatchEvent((new CustomEvent("change", {}) ));

		sa1 = SelectArea(document.querySelector("#test-box1"));
		sa1.selectedArea.innerHTML = '<img src="http://www.mins01.com/img/logo.gif" />'
		sa1.show();
		sa2 = SelectArea(document.querySelector("#test-box2"));
		sa2.selectedArea.innerHTML = '<span style="text-align:center;display:flex;justify-content: center;align-items: center;">test text</span>'
		sa2.show();
		sa3 = SelectArea(document.querySelector("#test-box3"));
		sa3.className = sa3.className +' selectArea-no-bg';
		sa3.show(50,50,100,100);
		sa4 = SelectArea(document.querySelector("#test-box4"));
		sa4.outOfRange=true;
		sa4.show(50,50,100,100);
		sa5 = SelectArea(document.querySelector("#test-box5"));
		sa5.selectedArea.innerHTML = '<span style="text-align:center;display:flex;justify-content: center;align-items: center;">Hello</span>'
		sa5.show();

		sa7 = SelectArea(document.querySelector("#test-box7"));
		sa7.setRangeTarget(document.querySelector("#test-box8"))
		sa7.outOfRange=false;
		sa7.show();


		sa9 = SelectArea(document.querySelector("#test-box9"));
		sa9.setRangeTarget(document.querySelector("#test-box10"))
		sa9.outOfRange=true;
		sa9.show();


		sa11 = SelectArea(document.querySelector("#test-box10"));
		sa11.setRangeTarget(document.querySelector("#test-box11"))
		sa11.outOfRange=false;
		sa11.selectedArea.innerHTML='<span>for test-box10, rangeTarget = text-box11</span>';
		sa11.show(100,100,150,150);
		sa11.sizeTo(100,100);

		sa12 = SelectArea(document.querySelector("#test-box12"));
		sa12.className = sa12.className +' selectArea-pointer-lg';
		sa12.show(50,50,100,100);
		sa13 = SelectArea(document.querySelector("#test-box13"));
		sa13.className = sa13.className +' selectArea-pointer-md';
		sa13.show(50,50,100,100);
		sa14 = SelectArea(document.querySelector("#test-box14"));
		sa14.className = sa14.className +' selectArea-pointer-sm';
		sa14.show(50,50,100,100);
		sa15 = SelectArea(document.querySelector("#test-box15"));
		sa15.className = sa15.className +' selectArea-pointer-xs';
		sa15.show(50,50,100,100);

		sa16 = SelectArea(document.querySelector("#test-box16"));
		sa16.show(50,50,100,100);

	});
	</script>

</head>
<body>
	<div class="container">

		<h1>SelectArea <button type="button" onclick="window.location.reload(true)">다시 읽기</button></h1>
		<p>
			영역 지정 UI
			<ul>
				<li>jQuery나 bootstrap 등이 없이. 최대한 Tag(node)의 기본 기능을 사용하도록.</li>
				<li>github : <a href="https://github.com/mins01/ui_SelectArea" target="_blank">https://github.com/mins01/ui_SelectArea</a></li>
			</ul>
			주요 멤버 변수
			<ul>
				<!-- <li>SelectArea.target : node. 영역 기준 대상</li> -->
				<li>SelectArea.selectedArea : 선택된 영역을 나타내는 DIV. CSS .selectArea-layout 참고</li>
				<li>SelectArea.outOfRange : 영역 기준 대상을 벗어날 수 있는지에 대한 설정(default:false)</li>
			</ul>
			주요 멤버 변수
			<ul>
				<li>SelectArea(html_node) //위치 기준 대상,이동 위치 기준으로 설정하며 SelectArea UI를 준다.</li>
				<li>SelectArea.setTarget(html_node) //위치 기준 대상</li>
				<li>SelectArea.setRangeTarget(html_node) //이동 위치 기준 대상</li>
				<li>SelectArea.show(x,y,x1,y1) //시작과 끝의 좌표로 보이기(값이 없으면 이전 정보 사용)</li>
				<li>SelectArea.showFullsize() //타겟의 크기에 맞춰서 보이기</li>
				<li>SelectArea.showWithSize(x,y,w,h) //시작과 크기로 보이기(미지정 시 최대치)</li>
				<li>SelectArea.hide() //감추기</li>
				<li>SelectArea.enable() //사용가능</li>
				<li>SelectArea.disable() //사용불가</li>
				<li>SelectArea.getSelectedAreaRect() //현재 선택된 영역의 정보(target에 상대적)</li>
				<li>SelectArea.moveAndSize(x,y,w,h) //이동 및 너비 조정,(이동 위치에 따라 너비가 변경 될 수 있다)</li>
				<li>SelectArea.moveBy(x,y,fixedSize) //x,y 좌표로 상대적 이동</li>
				<li>SelectArea.sizeBy(w,h) //상대적 크기 조절</li>
				<li>SelectArea.redraw() //현재의 정보로 다시 그린다. (기본적으로 메소드 호출후 자동으로 불린다.)</li>
				<li>SelectArea.drawFromCoordinateBy(x,y,x1,y1) //시작과 끝좌표의 상대 값으로 다시 그린다.</li>
				

			</ul>
			CustomEvent
			<ul>
				<li>change : selectedArea 가 변경되면 발생한다</li>
			</ul>
		</p>
		<hr />
		<form name="form_sa0">
			<div style="background-color:#369; width:300px; height:300px; margin: 0 auto" id="test-box-0" >
				test-box-0
				<div style="background-color:#abc; width:200px; height:200px; margin: 0 auto" id="test-box0" >
					test-box0
				</div>
			</div>

			<button type="button" onclick="sa0.show()">.show()</button>
			<button type="button" onclick="sa0.showFullsize()">.showFullsize()</button>
			<button type="button" onclick="sa0.show(30,30,10,10)">.show(30,30,10,10)</button>
			<button type="button" onclick="sa0.show(30,30,1000,1000)">.show(30,30,1000,1000)</button>
			<button type="button" onclick="sa0.show(100,100,100,100)">.show(100,100,100,100)</button>
			<button type="button" onclick="sa0.showWithSize(100,100,100,100)">.showWithSize(100,100,100,100)</button>
			<button type="button" onclick="sa0.hide()">.hide()</button><br />
			<button type="button" onclick="sa0.enable()">.enable()</button>
			<button type="button" onclick="sa0.disable()">.disable()</button>			
			<button type="button" onclick="sa0.destroy()">.destroy()</button><br />
			<button type="button" onclick="sa0.moveBy(-1,0)" >.moveBy(-1,0)</button><button type="button" onclick="sa0.moveBy(1,0)" >.moveBy(1,0)</button>
			<button type="button" onclick="sa0.moveBy(0,-1)" >.moveBy(0,-1</button><button type="button" onclick="sa0.moveBy(0,1)" >.moveBy(0,1)</button>
			<button type="button" onclick="sa0.sizeBy(-1,0)" >.sizeBy(-1,0)</button><button type="button" onclick="sa0.sizeBy(1,0)" >.sizeBy(1,0)</button>
			<button type="button" onclick="sa0.sizeBy(0,-1)" >.sizeBy(0,-1)</button><button type="button" onclick="sa0.sizeBy(0,1)" >.sizeBy(0,1)</button>
			<br />
			sa0.moveTo(w,h) :
			x:<input name="v2_x" type="range" oninput="sa0.moveTo(parseFloat(this.form.v2_x.value),parseFloat(this.form.v2_y.value))" value="0" min="-500" max="500"  />/
			y:<input name="v2_y" type="range" oninput="sa0.moveTo(parseFloat(this.form.v2_x.value),parseFloat(this.form.v2_y.value))" value="0"  min="-500" max="500"  />/

			<br />
			sa0.sizeTo(w,h) :
			w:<input name="v2_w" type="range" oninput="sa0.sizeTo(parseFloat(this.form.v2_w.value),parseFloat(this.form.v2_h.value))" value="50" min="0" max="500"  />/
			h:<input name="v2_h" type="range" oninput="sa0.sizeTo(parseFloat(this.form.v2_w.value),parseFloat(this.form.v2_h.value))" value="50"  min="0" max="500"  />/
			<br />
			<button type="button" onclick="sa0.outOfRange = true" >.outOfRange=true</button>
			<button type="button" onclick="sa0.outOfRange = false" .>outOfRange=false</button>

			<br />
			moveAndSize(x,y,w,h) :
			x:<input name="v_x" type="range" oninput="sa0.moveAndSize(parseFloat(this.form.v_x.value),parseFloat(this.form.v_y.value),parseFloat(this.form.v_w.value),parseFloat(this.form.v_h.value))" value="10" min="-500" max="500"  />/
			y:<input name="v_y" type="range" oninput="sa0.moveAndSize(parseFloat(this.form.v_x.value),parseFloat(this.form.v_y.value),parseFloat(this.form.v_w.value),parseFloat(this.form.v_h.value))" value="10"  min="-500" max="500"  />/

			w:<input name="v_w" type="range" oninput="sa0.moveAndSize(parseFloat(this.form.v_x.value),parseFloat(this.form.v_y.value),parseFloat(this.form.v_w.value),parseFloat(this.form.v_h.value))" value="50" min="0" max="500"  />/
			h:<input name="v_h" type="range" oninput="sa0.moveAndSize(parseFloat(this.form.v_x.value),parseFloat(this.form.v_y.value),parseFloat(this.form.v_w.value),parseFloat(this.form.v_h.value))" value="50"  min="0" max="500"  />/
			<br />
			font-size:<input type="number" oninput="sa0.style.fontSize=this.value+'px'" value="10"  min="1" max="50"  />px
			<br />
			<button type="button" onclick="document.querySelector('#test-out0').value=JSON.stringify(sa0.getSelectedAreaRect())">결과 .getSelectedAreaRect()</button><br />
			<input type="text" id="test-out0" placeholder="결과" style="width:98%" />
			<button type="button" onclick="document.querySelector('#test-out1').value=JSON.stringify(sa0.selectedArea.getBoundingClientRect())">결과 .selectedArea.getBoundingClientRect()</button><br />
			<input type="text" id="test-out1" placeholder="결과" style="width:98%" />
		</form>

		<hr />
		<h2>이미지 크기 조정</h2>
		<button type="button" onclick="var img = sa1.selectedArea.querySelector('img'); sa1.moveAndSize(0,0,img.naturalWidth,img.naturalHeight)">이미지 기본크기로</button>
		<div style="background-color:#cba; width:300px; height:300px; margin: 0 auto;background-image:url('http://www.mins01.com/img/logo.gif')" id="test-box1" >
			test-box1
		</div>
		<hr />
		<h2>텍스트</h2>
		<div style="background-color:#bca; width:300px; height:300px; margin: 0 auto; " id="test-box2" >
			test-box2
		</div>
		<hr />
		<h2>no bg</h2>
		<div style="background-color:#9c6; width:300px; height:300px; margin: 0 auto" id="test-box3" >
			test-box3
		</div>
		<hr />
		<h2>outOfRange = true</h2>
		<div style="background-color:#acc; width:300px; height:300px; margin: 0 auto" id="test-box4" >
			test-box4
		</div>
		<hr />
		<h2>.setTarget()</h2>
		<div style="text-align:center">
			<div style="display: inline-block;background-color:#cbb; width:300px; height:300px; margin: 0 auto" id="test-box5" >
				test-box5<br />
				<button type="button" onclick="sa5.setTarget(document.querySelector('#test-box5'));sa5.setRangeTarget(document.querySelector('#test-box5'));">여기에 보이기</button>
			</div>
			<div style="display: inline-block;background-color:#bbc; width:300px; height:300px; margin: 0 auto" id="test-box6" >
				test-box6<br />
				<button type="button" onclick="sa5.setTarget(document.querySelector('#test-box6'));sa5.setRangeTarget(document.querySelector('#test-box6'));">여기에 보이기</button>
			</div>
		</div>
		<h2>.setRangeTarget()</h2>
		<div style="text-align:center">
			<div style="display: inline-block;background-color:#369; width:300px; height:300px; margin: 0 auto;overflow:hidden" id="test-box8" >
				test-box8, .outOfRange=false<br />
				<div style="background-color:#cbb; width:200px; height:200px; margin: 0 auto" id="test-box7" >
					test-box7<br />
				</div>
			</div>
			<div style="display: inline-block;background-color:#369; width:300px; height:300px; margin: 0 auto;overflow:hidden" id="test-box10" >
				test-box10, .outOfRange=true<br />
				<div style="background-color:#cbb; width:200px; height:200px; margin: 0 auto" id="test-box9" >
					test-box9<br />
				</div>
			</div>
			<div style="display: inline-block;background-color:#369; width:300px; height:300px; margin: 0 auto;overflow:hidden" id="test-box11" >
				test-box11, .outOfRange=false<br />
			</div>
		</div>
		<h2>css : selectArea-pointer-lg , selectArea-pointer-md , selectArea-pointer-sm , selectArea-pointer-xs</h2>
		<div style="text-align:center">
			<div style="display: inline-block;background-color:#cbb; width:200px; height:200px; margin: 0 auto" id="test-box12" >
				test-box12<br />selectArea-pointer-lg
			</div>
			<div style="display: inline-block;background-color:#abb; width:200px; height:200px; margin: 0 auto" id="test-box13" >
				test-box13<br />selectArea-pointer-md
			</div>
			<div style="display: inline-block;background-color:#ccb; width:200px; height:200px; margin: 0 auto" id="test-box14" >
				test-box14<br />selectArea-pointer-sm
			</div>
			<div style="display: inline-block;background-color:#cbc; width:200px; height:200px; margin: 0 auto" id="test-box15" >
				test-box15<br />selectArea-pointer-xs
			</div>
			<div style="display: inline-block;background-color:#abc; width:200px; height:200px; margin: 0 auto" id="test-box16" >
				test-box16<br />default = 1em
			</div>
		</div>
	</div>
</body>
</html>
